actor DEPlasmaGun : PlasmaRifle replaces PlasmaRifle
{
  Weapon.BobStyle alpha
  Inventory.PickupSound "pickup/plasmagun"
  States
  {
	Select:
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
	
		PLSG A 0 A_SetCrossHair(12)
		//SHTG A 0 A_PlaySoundEX("misc/w_pkup", 1)
		//TNT1 AAAAAAAAAAAA 0 A_Raise
		PLSG A 1 A_Raise
		Wait
	
	Deselect:
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		
		PLSG A 1 A_Lower
		Wait
  
  /*SelectAnimation:
	PLSG FFEDCB 1*/
	
  Ready:
	TNT1 A 0 A_JumpIfInventory("KickCheck", 1, "KickAttack")
		
	PLSG A 1 A_WeaponReady
	Loop
	
  Fire:
	TNT1 A 0 A_JumpIf(callACS("BobToggle")==1,"BobFire")
	PLSG A 3 A_FirePlasma
	PLSG A 0 A_ReFire
	PLSG B 1
	PLSG CDE 1
	PLSG F 12
	PLSG EDCB 1
	Goto Ready
  BobFire:
	PLSG A 3 A_FirePlasma
	PLSG A 0 A_ReFire
	TNT1 A 0 A_WeaponReady(WRF_NOFIRE | WRF_NOSWITCH)
	PLSG B 1
	TNT1 A 0 A_WeaponReady(WRF_NOFIRE | WRF_NOSWITCH)
	PLSG CDE 1
	TNT1 A 0 A_WeaponReady(WRF_NOFIRE | WRF_NOSWITCH)
	PLSG F 12
	TNT1 A 0 A_WeaponReady(WRF_NOFIRE | WRF_NOSWITCH)
	PLSG EDCB 1
	Goto Ready
  Flash:
	PLSF A 3 Bright
	{
		A_WeaponOffset(0, 40, WOF_KEEPX | WOF_INTERPOLATE);
		A_Light1;
	}
	Goto LightDone
	PLSF B 3 Bright 
	{
		A_WeaponOffset(0, 35, WOF_KEEPX | WOF_INTERPOLATE);
		A_Light1;
	}
	//I Don't know how i make a smooth animation with the original Doom Sprites
	Goto LightDone
	
	KickAttack:
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, true)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		
		TNT1 A 0 A_JumpIf(momZ > 0, "AirKick")
		TNT1 A 0 A_JumpIf(momZ < 0, "AirKick")
        TNT1 A 0 A_JumpIfInventory("PowerStrength", 1, "BerserkerKick")
				
		TNT1 A 0 SetPlayerProperty(0, 1, PROP_FROZEN)
		
		TNT1 A 0 A_StartSound("skeleton/swing")
		TNT1 A 0 A_AlertMonsters (500, 0)
		KICK BCD 1
		TNT1 A 0 A_CustomPunch(2 * Random(1,10), true, 0, "KickPuff", 75, 0, 0, "BasicArmorBonus", "*fist")
		KICK H 2
		TNT1 A 0 SetPlayerProperty(0, 0, 0)
		KICK IGFEDCB 2
		
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, false)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		Goto Ready
		
	BerserkerKick:
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, true)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		
		TNT1 A 0 A_StartSound("skeleton/swing")
		TNT1 A 0 A_AlertMonsters (500, 0)
		KICK BCD 1
        TNT1 A 0 A_CustomPunch(20 * Random(1, 10), TRUE, 0, "BerserkPuff", 75, 0, 0, "BasicArmorBonus", "skeleton/melee")
        KICK H 2
		KICK IGFEDCB 2
		
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, false)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		Goto Ready
		
	AirKick:
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, true)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
	   
		TNT1 A 0 A_JumpIfInventory("PowerStrength", 1, "BerserkAirKick")
		
		TNT1 A 0 SetPlayerProperty(0, 1, PROP_FROZEN)
		
		TNT1 A 0 A_StartSound("skeleton/swing")
		TNT1 A 0 A_Recoil(-6)
		KICK JKLMN 1
        TNT1 A 0 A_CustomPunch(2*Random(1,10), true, 0, "KickPuff", 75, 0, 0, "BasicArmorBonus", "*fist")
        KICK O 2 A_AlertMonsters (500, 0)
		KICK PQRST 2
		
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, false)
		
		TNT1 A 0 SetPlayerProperty(0, 0, 0)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		Goto Ready
		
	BerserkAirKick:
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, true)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		
		TNT1 A 0 A_StartSound("skeleton/swing")
		TNT1 A 0 A_Recoil(-6)
		KICK JKLMN 1
        TNT1 A 0 A_CustomPunch(20 * Random(1, 10), TRUE, 0, "BerserkPuff", 75, 0, 0, "BasicArmorBonus", "skeleton/melee")
        KICK O 2 A_AlertMonsters (500, 0)
		KICK PQRST 2
		
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, false)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		Goto Ready
  }
}

actor DEPlasmaBall : PlasmaBall replaces PlasmaBall
{
	DamageType Plasma
	
	Radius 8
	Height 16
	Alpha 0.75
	RenderStyle Add
  
	+ROLLSPRITE
	+ROLLCENTER
	
	+FORCEXYBILLBOARD
	States
	{
	Spawn:
		PLSS A 0
		PLSS A 0 A_SetRoll(random(-360, 360))
	Projectile:
		PLSS A 1 Bright
		{
			A_SpawnItemEx("PlasmaTrail");
			A_SetRoll((roll + 15), SPF_INTERPOLATE);
		}
		Loop
 
	Death:
		PLSE A 0 A_SpawnItemEx("PlasmaFloorCheck", 0, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		PLSE ABC 4 Bright
		PLSE DE 4 A_FadeOut(0.1)
		Stop
  }
}

actor TechPlasmaBall : DEPlasmaBall
{
  Radius 10
  Height 13
  FastSpeed 30
}