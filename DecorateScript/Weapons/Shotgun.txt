actor DEShotgun : Shotgun replaces Shotgun
{
  Weapon.BobStyle smooth
  States
  {
	Select:
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		
		SHTG A 0 A_SetCrossHair(9)
		//SHTG A 0 A_PlaySoundEX("misc/w_pkup", 1)
		//TNT1 AAAAAAAAAAAA 0 A_Raise
		SHTG A 1 A_Raise
		Wait
		
	Deselect:
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		
		SHTG A 1 A_Lower
		Wait
  
  /*SelectAnimation:
	SHTG A 0 A_PlaySoundEX("misc/w_pkup", 1)
	SHTG GFEDCB 1*/
	
	Ready:
		TNT1 A 0 A_JumpIfInventory("KickCheck", 1, "KickAttack")
		
		SHTG A 1 A_WeaponReady
		Loop
	
	Fire:
		TNT1 A 0 A_JumpIf(callACS("BobToggle")==1,"BobFire")
		
		SHTG A 4
		{
			A_WeaponOffset(0, 40, WOF_KEEPX | WOF_INTERPOLATE);
			A_FireBullets (5.6, 0, 7, 5, "ShotgunPuff");
			A_PlaySound ("weapons/shotgf", CHAN_WEAPON);
			A_GunFlash;
		}
		SHTG A 3 A_WeaponOffset(0, 32, WOF_KEEPX | WOF_INTERPOLATE)
		SHTG B 2
		SHTG C 2
		SHTG DEFGHIJ 1
		SHTG IH 4
		SHTG GFEDCB 1
		SHTG A 3
		SHTG A 7 A_ReFire
		Goto Ready
		
	BobFire:
		SHTG A 4
		{
			A_WeaponOffset(0, 40, WOF_KEEPX | WOF_INTERPOLATE);
			A_FireBullets (5.6, 0, 7, 5, "ShotgunPuff");
			A_PlaySound ("weapons/shotgf", CHAN_WEAPON);
			A_GunFlash;
		}
		SHTG A 3 A_WeaponOffset(0, 32, WOF_KEEPX | WOF_INTERPOLATE)
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SHTG B 2
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SHTG C 2
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SHTG DEFGHIJ 1
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SHTG IH 4
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SHTG GFEDCB 1
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SHTG A 3
		TNT1 A 0 A_WeaponReady(WRF_NOFIRE|WRF_NOSWITCH)
		SHTG A 7 A_ReFire
		Goto Ready
	
	Flash:
		SHTF A 1 Bright
		SHTF B 3 Bright
		SHTF A 2 Bright
		Goto LightDone
	
	KickAttack:
		TNT1 A 0 A_Overlay(3, "Aside")
		
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, true)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		
		TNT1 A 0 A_JumpIf(momZ > 0, "AirKick")
		TNT1 A 0 A_JumpIf(momZ < 0, "AirKick")
        TNT1 A 0 A_JumpIfInventory("PowerStrength", 1, "BerserkerKick")
				
		TNT1 A 0 SetPlayerProperty(0, 1, PROP_FROZEN)
		
		TNT1 A 0 A_StartSound("skeleton/swing")
		TNT1 A 0 A_AlertMonsters (500, 0)
		KICK BCD 1
		TNT1 A 0 A_CustomPunch(2 * Random(1,10), true, 0, "KickPuff", 75, 0, 0, "BasicArmorBonus", "*fist")
		KICK H 2
		TNT1 A 0 SetPlayerProperty(0, 0, 0)
		KICK IGFEDCB 2
		
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, false)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		Goto Ready
		
	BerserkerKick:
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, true)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		
		TNT1 A 0 A_StartSound("skeleton/swing")
		TNT1 A 0 A_AlertMonsters (500, 0)
		KICK BCD 1
        TNT1 A 0 A_CustomPunch(20 * Random(1, 10), TRUE, 0, "BerserkPuff", 75, 0, 0, "BasicArmorBonus", "skeleton/melee")
        KICK H 2
		KICK IGFEDCB 2
		
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, false)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		Goto Ready
		
	AirKick:
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, true)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
	   
		TNT1 A 0 A_JumpIfInventory("PowerStrength", 1, "BerserkAirKick")
		
		TNT1 A 0 SetPlayerProperty(0, 1, PROP_FROZEN)
		
		TNT1 A 0 A_StartSound("skeleton/swing")
		TNT1 A 0 A_Recoil(-6)
		KICK JKLMN 1
        TNT1 A 0 A_CustomPunch(2*Random(1,10), true, 0, "KickPuff", 75, 0, 0, "BasicArmorBonus", "*fist")
        KICK O 2 A_AlertMonsters (500, 0)
		KICK PQRST 2
		
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, false)
		
		TNT1 A 0 SetPlayerProperty(0, 0, 0)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		Goto Ready
		
	BerserkAirKick:
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, true)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		
		TNT1 A 0 A_StartSound("skeleton/swing")
		TNT1 A 0 A_Recoil(-6)
		KICK JKLMN 1
        TNT1 A 0 A_CustomPunch(20 * Random(1, 10), TRUE, 0, "BerserkPuff", 75, 0, 0, "BasicArmorBonus", "skeleton/melee")
        KICK O 2 A_AlertMonsters (500, 0)
		KICK PQRST 2
		
		TNT1 A 0 A_OverlayFlags(0, PSPF_INTERPOLATE, false)
		
		TNT1 A 0 A_TakeInventory("KickCheck", 999)
		Goto Ready
	Aside:
		TNT1 A 0 A_OverlayFlags(3, PSPF_ADDBOB, true)
		TNT1 A 0 A_OverlayPivotAlign(3, PSPA_RIGHT, PSPA_BOTTOM)
		
		SHTG AEE 1
		{
			A_OverlayOffset(3, -35, 40, WOF_KEEPY | WOF_INTERPOLATE );
			A_OverlayRotate(3, 3, WOF_ADD);
		}
		SHTG FF 1
		{
			A_OverlayOffset(3, -30, 55, WOF_KEEPY | WOF_INTERPOLATE );
			A_OverlayRotate(3, 5, WOF_ADD);
		}
		SHTG F 10
		SHTG EEA 1 
		{
			A_OverlayOffset(3, 0, 0, WOF_KEEPY | WOF_INTERPOLATE );
			A_OverlayRotate(3, -5, WOF_ADD);
		}
		SHTG A 1
		Stop
	}
}